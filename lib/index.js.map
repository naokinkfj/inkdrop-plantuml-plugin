{"version":3,"sources":["../src/index.js"],"names":["PlantUML","React","Component","constructor","props","state","svg","componentDidMount","renderDiagram","children","componentWillUpdate","nextProps","shouldComponentUpdate","nextState","render","__html","code","then","setState","module","exports","activate","MDEPreview","inkdrop","components","classes","remarkCodeComponents","plantuml","puml","deactivate"],"mappings":";;AAAA;;;;AACA;;;;IAEMA,Q,GAAN,MAAMA,QAAN,SAAuBC,gBAAMC,SAA7B,CAAuC;AACrCC,cAAaC,KAAb,EAAoB;AAClB,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa,EAAEC,KAAK,EAAP,EAAb;AACD;AACDC,sBAAqB;AACnB,SAAKC,aAAL,CAAmB,KAAKJ,KAAL,CAAWK,QAAX,CAAoB,CAApB,CAAnB;AACD;AACDC,sBAAqBC,SAArB,EAAgC;AAC9B,QAAIA,UAAUF,QAAV,CAAmB,CAAnB,MAA0B,KAAKL,KAAL,CAAWK,QAAX,CAAoB,CAApB,CAA9B,EAAsD;AACpD,WAAKD,aAAL,CAAmBG,UAAUF,QAAV,CAAmB,CAAnB,CAAnB;AACD;AACF;AACDG,wBAAuBD,SAAvB,EAAkCE,SAAlC,EAA6C;AAC3C,WAAOF,UAAUF,QAAV,CAAmB,CAAnB,MAA0B,KAAKL,KAAL,CAAWK,QAAX,CAAoB,CAApB,CAA1B,IACLI,UAAUP,GAAV,KAAkB,KAAKD,KAAL,CAAWC,GAD/B;AAED;AACDQ,WAAU;AACR,WAAO,uCAAK,yBAAyB,EAAEC,QAAQ,KAAKV,KAAL,CAAWC,GAArB,EAA9B,GAAP;AACD;AACDE,gBAAeQ,IAAf,EAAqB;AACnB,sBAAUA,IAAV,EAAgBC,IAAhB,CAAqBX,OAAO;AAC1B,WAAKY,QAAL,CAAc,EAAEZ,GAAF,EAAd;AACD,KAFD;AAGD;AAxBoC,C;;;AA2BvCa,OAAOC,OAAP,GAAiB;AACfC,aAAY;AACV,UAAM,EAAEC,UAAF,KAAiBC,QAAQC,UAAR,CAAmBC,OAA1C;AACA,QAAIH,UAAJ,EAAgB;AACdA,iBAAWI,oBAAX,CAAgCC,QAAhC,GAA2C3B,QAA3C;AACAsB,iBAAWI,oBAAX,CAAgCE,IAAhC,GAAuC5B,QAAvC;AACD;AACF,GAPc;;AASf6B,eAAc;AACZ,UAAM,EAAEP,UAAF,KAAiBC,QAAQC,UAAR,CAAmBC,OAA1C;AACA,QAAIH,UAAJ,EAAgB;AACdA,iBAAWI,oBAAX,CAAgCC,QAAhC,GAA2C,IAA3C;AACAL,iBAAWI,oBAAX,CAAgCE,IAAhC,GAAuC,IAAvC;AACD;AACF;AAfc,CAAjB","file":"index.js","sourcesContent":["import React from 'react'\nimport { render as renderUML } from '@shd101wyy/mume/out/src/puml'\n\nclass PlantUML extends React.Component {\n  constructor (props) {\n    super(props)\n    this.state = { svg: '' }\n  }\n  componentDidMount () {\n    this.renderDiagram(this.props.children[0])\n  }\n  componentWillUpdate (nextProps) {\n    if (nextProps.children[0] !== this.props.children[0]) {\n      this.renderDiagram(nextProps.children[0])\n    }\n  }\n  shouldComponentUpdate (nextProps, nextState) {\n    return nextProps.children[0] !== this.props.children[0] ||\n      nextState.svg !== this.state.svg\n  }\n  render () {\n    return <div dangerouslySetInnerHTML={{ __html: this.state.svg }} />\n  }\n  renderDiagram (code) {\n    renderUML(code).then(svg => {\n      this.setState({ svg })\n    })\n  }\n}\n\nmodule.exports = {\n  activate () {\n    const { MDEPreview } = inkdrop.components.classes\n    if (MDEPreview) {\n      MDEPreview.remarkCodeComponents.plantuml = PlantUML\n      MDEPreview.remarkCodeComponents.puml = PlantUML\n    }\n  },\n\n  deactivate () {\n    const { MDEPreview } = inkdrop.components.classes\n    if (MDEPreview) {\n      MDEPreview.remarkCodeComponents.plantuml = null\n      MDEPreview.remarkCodeComponents.puml = null\n    }\n  }\n}\n"]}